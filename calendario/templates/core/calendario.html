{% extends 'base.html' %}{% block contenido %}

<link
  href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/index.global.min.css"
  rel="stylesheet"
/>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/index.global.min.js"></script>
<div id="calendar"></div>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    var calendarEl = document.getElementById("calendar");
    var temas = JSON.parse("{{ temas_json|escapejs }}");

    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: "dayGridMonth",
      locale: "es",
      selectable: true,
      buttonText: {
        today: "Hoy",
      },

      events: temas,

      select: function (info) {
        window.location.href = "/calendario/nuevo_tema/?fecha=" + info.startStr;
      },

      eventClick: function (info) {
        var id = info.event.id;
        window.location.href = "/calendario/editar_tema/" + id + "/";
      },
    });
    calendar.render();
  });
</script>

{% endblock %}
